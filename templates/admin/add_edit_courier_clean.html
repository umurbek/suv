{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen flex items-start justify-center pt-16">
    <div class="w-full max-w-xl px-4">
        <h1 class="text-3xl font-bold text-white mb-6 text-center">{% if action == 'add' %}Yangi kuryer{% else %}Kuryerni tahrirlash{% endif %}</h1>

        <form method="post" action="" class="bg-[#0f172a] border border-white/5 p-6 rounded-2xl shadow-2xl">
            {% csrf_token %}
            {% if form_error %}
            <div class="mb-4 px-3 py-2 rounded bg-red-800 text-red-200">{{ form_error }}</div>
            {% endif %}
            <div class="mb-4">
                <label class="block mb-2 text-slate-400 text-sm">Ism</label>
                {% if prefill.full_name %}
                    <input type="text" name="full_name" value="{{ prefill.full_name }}" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% elif courier and courier.full_name %}
                    <input type="text" name="full_name" value="{{ courier.full_name }}" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% else %}
                    <input type="text" name="full_name" value="" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% endif %}
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-slate-400 text-sm">Telefon</label>
                {% if prefill.phone %}
                    <input type="text" name="phone" value="{{ prefill.phone }}" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% elif courier and courier.phone %}
                    <input type="text" name="phone" value="{{ courier.phone }}" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% else %}
                    <input type="text" name="phone" value="" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none" required />
                {% endif %}
            </div>
            <div class="mb-4">
                <label class="block mb-2 text-slate-400 text-sm">Hudud</label>
                <select name="region_id" class="w-full bg-slate-900 text-white placeholder-slate-500 border border-white/5 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="">-</option>
                    {% for rc in region_choices %}
                        <option value="{{ rc.value }}"
                            {% if courier and courier.region %}
                                {% if rc.value == courier.region.id|stringformat:"s" or rc.value == courier.region.name %}selected{% endif %}
                            {% endif %}
                        >{{ rc.label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-4">
                <label class="inline-flex items-center text-slate-300">
                    <input type="checkbox" name="is_active" class="mr-2" {% if courier and courier.is_active %}checked{% elif action == 'add' %}checked{% endif %} />
                    <span>Faol</span>
                </label>
            </div>

            <div class="flex items-center gap-3 mt-6">
                <button class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-600 to-cyan-400 text-white px-4 py-2 rounded-lg font-semibold hover:brightness-105" type="submit">Saqlash</button>
                <a href="{% url 'couriers_view' %}" class="inline-flex items-center gap-2 bg-slate-800 text-slate-300 px-4 py-2 rounded-lg hover:bg-slate-700">Bekor</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
